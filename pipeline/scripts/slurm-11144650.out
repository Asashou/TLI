================================================================================
JobID = 11144650
User = aicha.hajiali, Account = all
Partition = gpu, Nodelist = dge010
================================================================================
2022-02-07 09:50:42.622129: W tensorflow/stream_executor/platform/default/dso_loader.cc:64] Could not load dynamic library 'libcudart.so.11.0'; dlerror: libcudart.so.11.0: cannot open shared object file: No such file or directory; LD_LIBRARY_PATH: /opt/sw/rev/21.12/haswell/gcc-9.3.0/anaconda3-2021.05-e3srav/lib
2022-02-07 09:50:42.622174: I tensorflow/stream_executor/cuda/cudart_stub.cc:29] Ignore above cudart dlerror if you do not have a GPU set up on your machine.
pipeline start 21982338.466178097
finished loading packages 49.75260128080845
reading files and compiling image into dict of 4D images
getting info from /home/mpg08/aicha.hajiali/TLI_project/TLI_data/preprocessed/test_run/general_pipeline_info.txt
32 lines found in txt_file with : as the delimiter
channel defined for similarity_check not recognized, so ch_0 used
{'script_run': 'general_pipline_4D.py', 'purpose': 'preprocessing session 211104 with pipeline from 220205', 'path_to_data': '/home/mpg08/aicha.hajiali/TLI_project/TLI_data/test_run/', 'save_path': '/home/mpg08/aicha.hajiali/TLI_project/TLI_data/preprocessed/test_run/', 'model_path': '/home/mpg08/aicha.hajiali/TLI_project/preprocessing/n2v/models/', 'output_name': '211120_brain2.2_LP40_P38.45.tif', 'group': '211120_brain2.2_LP40_P38.45_0', 'ch_names': ['GFP', 'red'], 'reg_subset': (0, 60, 325, 600, 300, 650), 'steps': ['compile', 'ants'], 'rotat_O': 6.0, 'Flip': False, 'xy_pixel': 0.0764616, 'z_pixel': 0.4, 'clipLimit': 1.0, 'kernel_size': (45, 45), 'model_name': 'n2v_3D_v6', 'reference_last': False, 'ants_ref_no': 1.0, 'ref_reset': 50.0, 'save_pre_shift': True, 'sigma': 5.0, 'drift_corr': ['Rigid', 'Affine', 'SyNRA'], 'metric': ['meansquares', 'mattes', 'CC'], 'grad_step': 0.2, 'flow_sigma': 3.0, 'total_sigma': 0.0, 'aff_sampling': 32.0, 'reg_iterations': (240, 80, 20), 'aff_iterations': (3000, 1200, 1200, 60), 'aff_shrink_factors': (6, 4, 2, 1), 'aff_smoothing_sigmas': (3, 2, 1, 0), 'check_ch': 'GFP', 'aff_random_sampling_rate': 0.2, 'syn_sampling': 32, 'ants_ref_st': 0}
reading_text runtime 0.0022309571504592896
finished reading txt file 0.005279991775751114
files_list runtime 0.0038799159228801727
the first 5 files (including ref) are ['/home/mpg08/aicha.hajiali/TLI_project/TLI_data/test_run/211120_brain2.2_LP40_P38.45_00001.tif', '/home/mpg08/aicha.hajiali/TLI_project/TLI_data/test_run/211120_brain2.2_LP40_P38.45_00002.tif', '/home/mpg08/aicha.hajiali/TLI_project/TLI_data/test_run/211120_brain2.2_LP40_P38.45_00003.tif', '/home/mpg08/aicha.hajiali/TLI_project/TLI_data/test_run/211120_brain2.2_LP40_P38.45_00004.tif', '/home/mpg08/aicha.hajiali/TLI_project/TLI_data/test_run/211120_brain2.2_LP40_P38.45_00005.tif']
compiling 3D image_files into dict of 4D_images of specified channels
compiling_files:   0%|          | 0/11 [00:00<?, ?it/s]<tifffile.TiffFile '211120_brain2.2…P38.45_00001.tif'> asarray failed to reshape (172, 1024, 1024) to (8, 10, 2, 1024, 1024)
compiling_files:   9%|▉         | 1/11 [00:05<00:57,  5.77s/it]<tifffile.TiffFile '211120_brain2.2…P38.45_00002.tif'> asarray failed to reshape (172, 1024, 1024) to (8, 10, 2, 1024, 1024)
compiling_files:  18%|█▊        | 2/11 [00:11<00:51,  5.73s/it]<tifffile.TiffFile '211120_brain2.2…P38.45_00003.tif'> asarray failed to reshape (172, 1024, 1024) to (8, 10, 2, 1024, 1024)
compiling_files:  27%|██▋       | 3/11 [00:17<00:45,  5.73s/it]<tifffile.TiffFile '211120_brain2.2…P38.45_00004.tif'> asarray failed to reshape (172, 1024, 1024) to (8, 10, 2, 1024, 1024)
compiling_files:  36%|███▋      | 4/11 [00:22<00:40,  5.72s/it]<tifffile.TiffFile '211120_brain2.2…P38.45_00005.tif'> asarray failed to reshape (172, 1024, 1024) to (8, 10, 2, 1024, 1024)
compiling_files:  45%|████▌     | 5/11 [00:28<00:34,  5.74s/it]<tifffile.TiffFile '211120_brain2.2…P38.45_00006.tif'> asarray failed to reshape (172, 1024, 1024) to (8, 10, 2, 1024, 1024)
compiling_files:  55%|█████▍    | 6/11 [00:34<00:28,  5.75s/it]<tifffile.TiffFile '211120_brain2.2…P38.45_00007.tif'> asarray failed to reshape (172, 1024, 1024) to (8, 10, 2, 1024, 1024)
compiling_files:  64%|██████▎   | 7/11 [00:40<00:22,  5.75s/it]<tifffile.TiffFile '211120_brain2.2…P38.45_00008.tif'> asarray failed to reshape (172, 1024, 1024) to (8, 10, 2, 1024, 1024)
compiling_files:  73%|███████▎  | 8/11 [00:45<00:17,  5.73s/it]<tifffile.TiffFile '211120_brain2.2…P38.45_00009.tif'> asarray failed to reshape (172, 1024, 1024) to (8, 10, 2, 1024, 1024)
compiling_files:  82%|████████▏ | 9/11 [00:51<00:11,  5.73s/it]<tifffile.TiffFile '211120_brain2.2…P38.45_00010.tif'> asarray failed to reshape (172, 1024, 1024) to (8, 10, 2, 1024, 1024)
compiling_files:  91%|█████████ | 10/11 [00:57<00:05,  5.74s/it]<tifffile.TiffFile '211120_brain2.2…P38.45_00011.tif'> asarray failed to reshape (172, 1024, 1024) to (8, 10, 2, 1024, 1024)
compiling_files: 100%|██████████| 11/11 [01:03<00:00,  5.73s/it]compiling_files: 100%|██████████| 11/11 [01:03<00:00,  5.74s/it]
1.0437706150114536 image new limits and type: 0 5344 uint16
1.0345074087381363 image new limits and type: 0 1180 uint16
split_convert runtime 2.4523176327347755
1.0303015522658825 image new limits and type: 0 4992 uint16
1.029217816889286 image new limits and type: 0 1093 uint16
split_convert runtime 2.4330070093274117
1.0298860669136047 image new limits and type: 0 5472 uint16
1.0289155468344688 image new limits and type: 0 1083 uint16
split_convert runtime 2.4323107972741127
1.028334442526102 image new limits and type: 0 5799 uint16
1.0278073847293854 image new limits and type: 0 1043 uint16
split_convert runtime 2.429799947887659
1.0295352786779404 image new limits and type: 0 5264 uint16
1.0317233428359032 image new limits and type: 0 1000 uint16
split_convert runtime 2.4348646588623524
1.0290209352970123 image new limits and type: 0 5151 uint16
1.0310281291604042 image new limits and type: 0 1083 uint16
split_convert runtime 2.433934725821018
1.028658714145422 image new limits and type: 0 5366 uint16
1.0284612774848938 image new limits and type: 0 1084 uint16
split_convert runtime 2.43056995049119
1.0288980640470982 image new limits and type: 0 5084 uint16
1.0278067961335182 image new limits and type: 0 1194 uint16
split_convert runtime 2.430237229913473
1.0284899584949017 image new limits and type: 0 5347 uint16
1.0276070982217789 image new limits and type: 0 1096 uint16
split_convert runtime 2.430347140878439
1.0270791500806808 image new limits and type: 0 5168 uint16
1.0287135913968086 image new limits and type: 0 1035 uint16
split_convert runtime 2.429463353008032
1.0226042121648788 image new limits and type: 0 4651 uint16
1.0229186862707138 image new limits and type: 0 1021 uint16
split_convert runtime 2.419016655534506
dict_keys(['GFP', 'red']) <class 'list'> 11
compiling the GFP channel
compiling the red channel
files_to_4D runtime 69.6202138774097
finished reading and compiling images 69.63118927553296
ants seq for 4D regi [ 0  1  2  3  4  5  6  7  8  9 10]
['/local/jobs/11144650/tmpbmtwqkdj0GenericAffine.mat']
similarity_check 1.000019 improved to 1.000019
<class 'dict'> <class 'numpy.ndarray'>
0.0 5344.0
0.0 1180.0
<class 'numpy.ndarray'> <class 'numpy.ndarray'>
<class 'numpy.ndarray'> <class 'numpy.ndarray'>
['/local/jobs/11144650/tmpqvi2_4mb0GenericAffine.mat']
similarity_check 0.7513972 improved to 0.8420881
<class 'dict'> <class 'numpy.ndarray'>
0.0 3786.0022
0.0 779.6621
<class 'numpy.ndarray'> <class 'numpy.ndarray'>
<class 'numpy.ndarray'> <class 'numpy.ndarray'>
['/local/jobs/11144650/tmplhyniivz0GenericAffine.mat']
similarity_check 0.7195596 improved to 0.8160716
<class 'dict'> <class 'numpy.ndarray'>
0.0 4997.4893
0.0 818.878
<class 'numpy.ndarray'> <class 'numpy.ndarray'>
<class 'numpy.ndarray'> <class 'numpy.ndarray'>
['/local/jobs/11144650/tmpzs30uk9i0GenericAffine.mat']
similarity_check 0.7284754 improved to 0.784123
<class 'dict'> <class 'numpy.ndarray'>
0.0 4246.819
0.0 786.2703
<class 'numpy.ndarray'> <class 'numpy.ndarray'>
<class 'numpy.ndarray'> <class 'numpy.ndarray'>
['/local/jobs/11144650/tmpog7_4gu80GenericAffine.mat']
similarity_check 0.66787314 improved to 0.76147974
<class 'dict'> <class 'numpy.ndarray'>
0.0 4316.026
0.0 667.71326
<class 'numpy.ndarray'> <class 'numpy.ndarray'>
<class 'numpy.ndarray'> <class 'numpy.ndarray'>
['/local/jobs/11144650/tmpa5im4pq80GenericAffine.mat']
similarity_check 0.65178066 improved to 0.7188126
<class 'dict'> <class 'numpy.ndarray'>
0.0 4318.992
0.0 661.2643
<class 'numpy.ndarray'> <class 'numpy.ndarray'>
<class 'numpy.ndarray'> <class 'numpy.ndarray'>
['/local/jobs/11144650/tmpueg8skta0GenericAffine.mat']
similarity_check 0.69411445 improved to 0.7007153
<class 'dict'> <class 'numpy.ndarray'>
0.0 4105.2344
0.0 687.95654
<class 'numpy.ndarray'> <class 'numpy.ndarray'>
<class 'numpy.ndarray'> <class 'numpy.ndarray'>
['/local/jobs/11144650/tmpzoa1vt8y0GenericAffine.mat']
similarity_check 0.7414444 improved to 0.6711461
<class 'dict'> <class 'numpy.ndarray'>
0.0 3547.693
0.0 737.3713
<class 'numpy.ndarray'> <class 'numpy.ndarray'>
<class 'numpy.ndarray'> <class 'numpy.ndarray'>
['/local/jobs/11144650/tmpaptsnqj60GenericAffine.mat']
similarity_check 0.68131155 improved to 0.67099684
<class 'dict'> <class 'numpy.ndarray'>
0.0 3047.192
0.0 579.3988
<class 'numpy.ndarray'> <class 'numpy.ndarray'>
<class 'numpy.ndarray'> <class 'numpy.ndarray'>
['/local/jobs/11144650/tmplofx_x4v0GenericAffine.mat']
similarity_check 0.6812782 improved to 0.6712729
<class 'dict'> <class 'numpy.ndarray'>
0.0 3078.541
0.0 522.7083
<class 'numpy.ndarray'> <class 'numpy.ndarray'>
<class 'numpy.ndarray'> <class 'numpy.ndarray'>
['/local/jobs/11144650/tmp2lnq9uxh0GenericAffine.mat']
similarity_check 0.6824291 improved to 0.6780773
<class 'dict'> <class 'numpy.ndarray'>
0.0 3352.5496
0.0 430.8641
<class 'numpy.ndarray'> <class 'numpy.ndarray'>
<class 'numpy.ndarray'> <class 'numpy.ndarray'>
image was ants object and is now converted to array
1.2428666241467 image new limits and type: 0 5344 uint16
1.2424367517232895 image new limits and type: 0 3786 uint16
1.2430161610245705 image new limits and type: 0 4997 uint16
1.2433824688196182 image new limits and type: 0 4246 uint16
1.2446472719311714 image new limits and type: 0 4316 uint16
1.2425549812614918 image new limits and type: 0 4318 uint16
1.2422370724380016 image new limits and type: 0 4105 uint16
1.24634675309062 image new limits and type: 0 3547 uint16
1.2425392754375935 image new limits and type: 0 3047 uint16
1.2422503493726254 image new limits and type: 0 3078 uint16
1.24224441498518 image new limits and type: 0 3352 uint16
image was ants object and is now converted to array
1.2432850413024426 image new limits and type: 0 1180 uint16
1.242162499576807 image new limits and type: 0 779 uint16
1.2424705363810062 image new limits and type: 0 818 uint16
1.2428461760282516 image new limits and type: 0 786 uint16
1.2427149750292301 image new limits and type: 0 667 uint16
1.2427974082529545 image new limits and type: 0 661 uint16
1.2425830885767937 image new limits and type: 0 687 uint16
1.2443943992257118 image new limits and type: 0 737 uint16
1.2428523302078247 image new limits and type: 0 579 uint16
1.2423047423362732 image new limits and type: 0 522 uint16
1.2484768778085709 image new limits and type: 0 430 uint16
<class 'ants.core.ants_image.ANTsImage'>
<class 'ants.core.ants_image.ANTsImage'> float32
<class 'ants.core.ants_image.ANTsImage'> float32
ants_round runtime 1044.668975200504
finished ants run with Rigid
Traceback (most recent call last):
  File "/home/mpg08/aicha.hajiali/TLI_project/preprocessing/pipeline/scripts/general_pipeline_4D.py", line 1077, in <module>
    main()
  File "/home/mpg08/aicha.hajiali/TLI_project/preprocessing/pipeline/scripts/general_pipeline_4D.py", line 966, in main
    image_4D, ants_shifts[ants_step] = apply_ants_4D(image_4D, 
  File "/home/mpg08/aicha.hajiali/TLI_project/preprocessing/pipeline/scripts/general_pipeline_4D.py", line 770, in apply_ants_4D
    scope = np.concatenate((scope, np.arange(ref_t,len(image[ch_names[-1]]))))
TypeError: object of type 'ANTsImage' has no len()
python died with exit status 1
============ Job Information ===================================================
Submitted: 2022-02-07T09:50:30
Started: 2022-02-07T09:50:33
Ended: 2022-02-07T10:10:04
Elapsed: 20 min, Limit: 2820 min, Difference: 2800 min
CPUs: 24, Nodes: 1
============= ProfiT-HPC =======================================================
To generate the ProfiT-HPC text report, run the following command
profit-hpc 11144650
================================================================================
